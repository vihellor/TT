<html>
<head>
  <title>TTI</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./../style/w3.css">
  <link rel="stylesheet" href="./../style/css?family=Raleway">
  <link rel="stylesheet" href="./../style/css/fontawesome-all.min.css">

  <script src="/scripts/usrTutorial.js"></script>
  <script src="/dist/Chart.min.js"></script>
  <link rel="stylesheet" type="text/css" href="./../DataTables/datatables.min.css"/>
  <script type="text/javascript" src="./../DataTables/jQuery-3.3.1/jquery-3.3.1.js"></script>
  <script type="text/javascript" src="./../DataTables/datatables.js"></script>
  <script src="./../scripts/ajax.js"></script>
  <style type="text/css">
  td.details-control {
    background: url('../resources/details_open.png') no-repeat center center;
    cursor: pointer;
  }
  tr.shown td.details-control {
      background: url('../resources/details_close.png') no-repeat center center;
  }</style>
  <style>
  html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
  </style>
</head>
<body class="w3-light-grey">

<!-- !PAGE CONTENT! -->
<div class="w3-panel w3-black w3-card-4 w3-display-middle" onclick="close_alert()" style="z-index:9; height:96%; width:100%; cursor:pointer;opacity: 0.8;display: none;" id="alertDiv">
</div>
<div class="w3-container w3-white w3-card-4 w3-display-middle" onclick="" style="z-index:15; height:80%; width:80%; cursor: auto;display: none;"  id="alertDiv2">
  <div class="chart-container" style="position: relative; height:100%; width:100%">
    <canvas id="chartAlert"></canvas>
  </div>
</div>

<!-- Top container -->
<div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
  <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i class="fa fa-bars"></i>  Menu</button>
  <span class="w3-bar-item w3-right">TTI 1.0</span>
</div>

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
  <div class="w3-container w3-row">
    <div class="w3-col s4">
      <img src="./../imgs/avatar2.png" class="w3-circle w3-margin-right" style="width:46px">
    </div>
    <div class="w3-col s8 w3-bar">
      <span>Buen día, <strong id="mainName">Mike</strong></span>
    </div>
  </div>
  <hr>
  <div class="w3-container">
    <h5>Herramientas</h5>
  </div>
  <div class="w3-bar-block">
    <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black" onclick="w3_close()" title="close menu"><i class="fa fa-times fa-fw"></i>  Close Menu</a>
    <button class="w3-bar-item w3-button tablink w3-green" onclick="openLink(event, 'Inicio')"><i class="fa fa-home fa-fw"></i>  Inicio</button>
    <button class="w3-bar-item w3-button tablink" onclick="openLink(event, 'tutorial')"><i class="fa fa-sort-alpha-down fa-fw"></i> Tutorial</button>
    <button class="w3-bar-item w3-button tablink" onclick="openLink(event, 'Finanzas')"><i class="fa fa-chart-line fa-fw"></i>  Finanzas</button>
    <button class="w3-bar-item w3-button tablink" onclick="openLink(event, 'nuevaPartida')"><i class="fa fa-gamepad fa-fw"></i> Nueva partida</button>
    <button class="w3-bar-item w3-button tablink" onclick="openLink(event, 'buscarPartida')"><i class="fa fa-bullseye fa-fw"></i>  Buscar partida</button>
    <!--<button class="w3-bar-item w3-button tablink" onclick="window.location = 'http://localhost/tutoriales/index.php';"><i class="fa fa-sort-alpha-down fa-fw"></i> Tutorial</button>-->
    <button class="w3-bar-item w3-button tablink" onclick="openLink(event, 'glosario')"><i class="fa fa-book fa-fw"></i> Glosario</button>
    <button class="w3-bar-item w3-button tablink" onclick="openLink(event, 'Configuracion')"><i class="fa fa-th-list fa-fw"></i>  Configuración</button>
    <!-- <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-history fa-fw"></i> Regresar </a> -->
    
  </div>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:300px; margin-top:43px">


  <!--inicio-->
  <div id="Inicio" class="w3-panel menuItem w3-animate-left" style="text-align: center;">
    <div class="w3-row-padding" >
      <div class="w3-twothird" >
        <br><br>
        <h1 id="bannerPrincipal">¡Bienvenido!</h1>
        <br>
        <p class="w3-large">
          Este sistema tiene como objetivo permitir a los usuarios entender el funcionamiento del mercado financiero bursátil en México, utilizando el juego como una herramienta de aprendizaje.
        </p>
        <p class="w3-large">
          Con este objetivo en mente, te invitamos a acceder al área de tutoriales y poder entender con mayor claridad el contenido de las partidas.
        </p>
        <!--<a href="./nuevoJuego.html"><input type="button" class="w3-button w3-xlarge w3-round-xlarge w3-white w3-border w3-border-green w3-hover-green" name="nuevoJuego" value="Nuevo juego"></a><br><br><br>
        <a href="./tutorial.html"><input type="button" class="w3-button w3-xlarge w3-round-xlarge w3-white w3-border w3-border-green w3-hover-green" name="tutorial" value="Tutorial"></a>
        <br><br><br>
        <a href="./buscarPartida.html"><input type="button" class="w3-button w3-xlarge w3-round-xlarge w3-white w3-border w3-border-green w3-hover-green" name="buscarPartida"  value="Buscar partida" ></a> -->
        
      </div>
    </div>
  </div>
    <!--  Configuración -->
  <div id="Configuracion" class="w3-panel menuItem w3-animate-left" style="display:none; text-align: center;">
    <div class="w3-row-padding" >
       <!--
       <br>
       <h2><b>Configuración</b></h2>
       <br><br>-->
       <br><br>
       <div class="flexContainer">
         <div>
           <img src="./../imgs/avatar2.png" class="w3-circle w3-margin-right" alt="Profile image" style="width: 400px">
         </div>
         <div>
           <br>
           <form onsubmit="event.preventDefault(); handleFormSubmit(this,'updateUsuario');">
             <input type="text" class="w3-input w3-xlarge" id="nickname" name="nickname" value="Mike" placeholder="Nickname" required="true" disabled="true"><br><br>
             <input type="text" class="w3-input w3-xlarge" id="name" name="name" value="Miguel" placeholder="Nombre" required="true"><br><br>
             <input type="text" class="w3-input w3-xlarge" id="app" name="app" value="Perez" placeholder="Apellidos" required="true"><br><br>
             <input type="text" class="w3-input w3-xlarge" id="apm" name="apm" value="Muñoz" placeholder="Apellidos" required="true"><br><br>
             <input type="text" class="w3-input w3-xlarge" id="ocupacion" name="ocupacion" value="Estudiante" placeholder="Ocupación" required="true"><br><br>
             <input type="email" class="w3-input w3-xlarge" id="email" name="email" value="mike@coreo.com" placeholder="Correo electrónico" required="true"><br><br>
             <input type="submit" class="w3-btn w3-green w3-xlarge" value="Cambiar">
           </form>
         </div>
       </div>
       <h2 onclick="acordeon('cambioContra')" ><b><i id="disUs" class="fa fa-chevron-circle-right"></i>Cambio Contraseña</b></h2>
       <div id="cambioContra" class="w3-hide w3-animate-zoom flexContainer">
         <form onsubmit="event.preventDefault(); validar(this,'updateContrasena');">
           <p>
             <label class="w3-text-green w3-large"><b>Contraseña anterior</b></label>
             <input type="password" class="w3-input w3-xlarge" name="OldPassword" required="true">
           </p>
           <div class="w3-cell-row">
             <div class="w3-container w3-cell w3-mobile">
               <p>
                 <label class="w3-text-green w3-large"><b>Nueva contraseña</b></label>
                 <input type="password" class="w3-input w3-xlarge" name="newPassword" required="true">
               </p>
             </div>
             <div class="w3-container w3-cell w3-mobile">
               <p>
                 <label class="w3-text-green w3-large"><b>Repetir contraseña</b></label>
                 <input type="password" class="w3-input w3-xlarge" name="newPassword2" required="true">
               </p>
             </div>
            </div>
          <input type="submit" class="w3-btn w3-green w3-xlarge" value="Cambiar contraseña">
        </form>
      </div>
    </div>
  </div>
  <!--  Finanzas personales -->
  <div id="Finanzas" class="menuItem w3-animate-left" style="display:none; text-align: center;">
       <!--
       <br>
       <h2><b>Configuración</b></h2>
       <br><br>-->
       <br><br>
    <div>
      <div class="flexContainer2">
      <div class="w3-card-4">
        <header class="w3-cell-row">
          <div id="l1" class="w3-half w3-container w3-green w3-cell">
            <a onclick="openLink2(event, 'egresos')"><h4>Ingresos</h4></a>
          </div>
          
          <div id="l2" class="w3-half w3-container w3-light-gray w3-cell">
            <a onclick="openLink2(event, 'ingresos')"><h4>Egresos</h4></a>
          </div>
      
        </header>
        <div class="w3-container w3-light-gray">
          <div id="ingresos" class="w3-animate-right flexContainer2">
             <div class="w3-responsive">
              <table id="tableIngresos" class="w3-table-all">
                <tbody><tr class="w3-green">
                  <th>Concepto</th>
                  <th>Monto</th>
                  <th>Semana de corte</th>
                  <th>Periodicidad</th>
                  <th></th>
                  <th></th>
                </tr>
              </tbody></table>
            </div> 
          </div>
          <div id="egresos" class="w3-animate-left flexContainer2" style="display:none;">
             <div class="w3-responsive">
              <table id="tableEgresos" class="w3-table-all">
                <tbody><tr class="w3-green">
                  <th>Concepto</th>
                  <th>Monto</th>
                  <th>Semana de corte</th>
                  <th>Periodicidad</th>
                  <th></th>
                  <th></th>
                  </tr>
                </tbody></table>
            </div> 
          </div>
          
          </div>

        </div>
      </div>
      <br><br>
      <button class="w3-btn w3-green w3-xlarge" onclick="proyectar();">Ver gráfica</button>
      <br><br>
      <div class="chart-container" style="position: relative; height:40vh; width:80vw">
          <canvas id="myChart"></canvas>
      </div>
      <div class="flexContainer2" style="display:none;">
      <div class="w3-card-4">
        <header class="w3-cell-row">
          <div id="l3" class="w3-half w3-container w3-light-gray w3-cell">
            <a onclick="openLink3(event, 'debito')"><h4>Débito</h4></a>
          </div>
          
          <div id="l4" class="w3-half w3-container w3-green w3-cell">
            <a onclick="openLink3(event, 'credito')"><h4>Crédito</h4></a>
          </div>
      
        </header>
        <div class="w3-container w3-light-gray">
          <div id="debito" class="w3-animate-right flexContainer2">
             <div class="w3-responsive">
              <table class="w3-table-all">
                <tbody>
                  <tr class="w3-green"><th>No de tarjeta</th><th>Fecha de corte</th><th>Saldo</th><th>Comisión fija</th><th>Valor de comisión fija</th><th></th><th></th>
                  </tr>
                  <tr>
                    <form onsubmit="event.preventDefault(); handleFormSubmit(this,'debito');">
                      <td><input class="w3-input" type="text" name="comisionFija" value="Sueldo"></td>
                      <td><input class="w3-input" type="number" name="porcentajeManejoCuenta" value="0"></td>
                      <td><input class="w3-input" type="number" name="valorComisionFija" value="1"></td>
                      <td><input class="w3-input" type="number" name="periodicidad" value="2"> semanas</td>
                      <td><input class="w3-input" type="number" name="periodicidad" value="2"> semanas</td>
                      <td><input type="submit" name="accion" value="edit"><i class="fa fa-edit fa-fw"></i></input></td>
                      <td><input type="submit" name="accion" value="delete"><i class="fa fa-times fa-fw"></i></input></td>
                    </form>
                    
                  </tr>
                  <tr>
                    <form onsubmit="event.preventDefault(); handleFormSubmit(this,'debito');">
                      <td><input class="w3-input" type="text" name="sueldo" value="Rentas"></td>
                      <td><input class="w3-input" type="number" name="monto" value="5000"></td>
                      <td><input class="w3-input" type="number" name="fecha" value="2"></td>
                      <td><input class="w3-input" type="number" name="periodicidad" value="4"> semanas</td>
                      <td><button type="submit" name="accion" value="edit"><i class="fa fa-edit fa-fw"></i></button></td>
                      <td><button type="submit" name="accion" value="delete"><i class="fa fa-times fa-fw"></i></button></td>
                    </form>
                  </tr>
                  <tr>
                    <form id="newDebito" onsubmit="event.preventDefault(); handleFormSubmit(this,'createDebito');">
                      <td></td><td></td><td><input onclick="showDebito();" type="button" class="w3-btn w3-green w3-xlarge" value="Nuevo"></td>
                    </form>
                  </tr>
                </tbody>
              </table>

            </div> 
          </div>
          <div id="credito" class="w3-animate-left flexContainer2" style="display:none;">
             <div class="w3-responsive">
              <table class="w3-table-all">
                <tr class="w3-green">
                  <th>Limite de crédito</th>
                  <th>Tasa de interés anual</th>
                  <th></th>
                  <th></th>
                </tr>
                <tr>
                  <form onsubmit="event.preventDefault(); handleFormSubmit2(this,'credito');">
                    <td><input class="w3-input" type="number" name="limiteCredito" value="10000"></td>
                    <td><input class="w3-input" type="number" name="tasaInteresAnual" value="1"></td>
                    <td><button type="submit" name="accion" value="edit"><i class="fa fa-edit fa-fw"></i></button></td>
                    <td><button type="submit" name="accion" value="delete"><i class="fa fa-times fa-fw"  aria-hidden="true"></i></button></td>
                  </form>
                  
                </tr>
                <tr>
                  <form onsubmit="event.preventDefault(); handleFormSubmit2(this,'credito');">
                    <td><input class="w3-input" type="text" name="sueldo" value="Rentas"></td>
                    <td><input class="w3-input" type="number" name="monto" value="5000"></td>
                    <td><input class="w3-input" type="number" name="fecha" value="2"></td>
                    <td><input class="w3-input" type="number" name="periodicidad" value="4"> semanas</td>
                    <td><button type="submit" name="accion" value="edit"><i class="fa fa-edit fa-fw"></i></button></td>
                    <td><button type="submit" name="accion" value="delete"><i class="fa fa-times fa-fw"  aria-hidden="true"></i></button></td>
                  </form>
                </tr>
                <tr>
                    <form id="newCredito" onsubmit="event.preventDefault(); handleFormSubmit(this,'createDebito');">
                      <td></td><td></td><td><input onclick="showCredito();" type="button" class="w3-btn w3-green w3-xlarge" value="Nuevo"></td>
                    </form>
                  </tr>
              </table>
            </div> 
           </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--  Buscar partida -->
  <div id="buscarPartida" class="w3-panel menuItem w3-animate-left"  style="display:none; text-align: center;">
    <div class="w3-row-padding" >
      <br>
      <h2><b><i></i>Partidas disponibles</b></h2>
      <button onclick="handleFormSubmit3(document.createElement('form'),'readAllPartida');"><i class="fa fa-bars"></i>Actualizar</button>
      <div class="w3-responsive">
        <table class="w3-table-all w3-centered">
          <tbody id="partidas">
            <tr class="w3-green">
              <th>Nombre</th>
              <th>Max. Jugadores</th>
              <th>Jugadores actuales</th>
              <th>Meta</th>
              <th></th>
            </tr>
          </tbody>
          
        </table>
      </div>
    </div>
  </div>
  <!--  Nueva partida -->
  <div id="nuevaPartida" class="w3-panel menuItem w3-animate-left" style="display:none; text-align: center;">
    <div class="w3-row-padding" >
      <div class="w3-twothird" >
        <br>
        <h2><b><i></i>Nueva partida</b></h2>
        <form onsubmit="event.preventDefault(); handleFormSubmit3(this,'createPartida');">
          <input type="text" class="w3-input w3-xlarge" name="nombrePartida" placeholder="Nombre de la partida" style="text-align: center;" required="true"><br><br>
          <input type="number" class="w3-input w3-xlarge" name="limite" placeholder="Número de jugadores" style="text-align: center;" required="true"><br><br>
          <input type="number" class="w3-input w3-xlarge" name="montoInicial" placeholder="Monto inicial" style="text-align: center;" required="true"><br><br>
          <input type="number" class="w3-input w3-xlarge" name="meta" placeholder="Meta" style="text-align: center;" required="true"><br>
          <input id="idFundador" type="number" name="fundador" hidden>
          <br>
          <br><br>
          <input type="submit" class="w3-button w3-xlarge w3-round-xlarge w3-white w3-border w3-border-green w3-hover-green" value="Crear partida">
        </form>
      </div>
    </div>
  </div>
  <!--  Tutorial -->
  <div id="tutorial" class="w3-panel menuItem w3-animate-left" style="display:none; text-align: center;">
    <div class="w3-row-padding" >
      <br>
      <br>
      <div id="tutDiv" class="flexContainer">
      </div>
    </div>
  </div>
  <!--  Glosario -->
  <div id="glosario" class="w3-panel menuItem w3-animate-left" style="display:none; text-align: center;">
    <div class="w3-row-padding" >
      <br>
      <br>
      <div id="glosarioDiv">
        <table id="exampleTable" class="display" style="width:100%"></table>
      </div>
    </div>
  </div>
  <!-- End page content -->
</div>
<script>

// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");
// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");
// Toggle between showing and hiding the sidebar, and add overlay effect

function validar(form,accion){
  console.log("validando la contraseña");
  var data = formToJSON(form.elements);
  //console.log(data['password'].localeCompare(data['password2']));
  if(data['newPassword'].localeCompare(data['newPassword2'])==0)
    handleFormSubmit(form,accion);
  else
    alert('Las contraseñas no coinciden.');
}

function w3_open() {
    if (mySidebar.style.display === 'block') {
        mySidebar.style.display = 'none';
        overlayBg.style.display = "none";
    } else {
        mySidebar.style.display = 'block';
        overlayBg.style.display = "block";
    }
}
// Close the sidebar with the close button
function w3_close() {
    mySidebar.style.display = "none";
    overlayBg.style.display = "none";
}
// Show the content
function openLink(evt, animName) {
  var i, x, tablinks;
  x = document.getElementsByClassName("menuItem");
  w3_close();
  for (i = 0; i < x.length; i++) {
     x[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablink");
  for (i = 0; i < x.length; i++) {
     tablinks[i].className = tablinks[i].className.replace(" w3-green", "");
  }
  document.getElementById(animName).style.display = "block";
  evt.currentTarget.className += " w3-green";
}
function openLink2(evt, animName) {
  var l1 =document.getElementById('l1');
  var l2 =document.getElementById('l2');
  if ("ingresos".localeCompare(animName)) {
    document.getElementById('egresos').style.display = "none";
    document.getElementById('ingresos').style.display = "block";
    l1.className=l1.className.replace("w3-light-gray","w3-green");
    l2.className=l2.className.replace("w3-green", "w3-light-gray");

  }else{
    document.getElementById('ingresos').style.display = "none";  
    document.getElementById('egresos').style.display = "block";
    l2.className=l2.className.replace("w3-light-gray","w3-green");
    l1.className=l1.className.replace("w3-green", "w3-light-gray");
  }
}
function openLink3(evt, animName) {
  var l1 =document.getElementById('l3');
  var l2 =document.getElementById('l4');
  if ("debito".localeCompare(animName)) {
    document.getElementById('debito').style.display = "none";
    document.getElementById('credito').style.display = "block";
    l1.className=l1.className.replace("w3-light-gray","w3-green");
    l2.className=l2.className.replace("w3-green", "w3-light-gray");

  }else{
    document.getElementById('credito').style.display = "none";  
    document.getElementById('debito').style.display = "block";
    l2.className=l2.className.replace("w3-light-gray","w3-green");
    l1.className=l1.className.replace("w3-green", "w3-light-gray");
  }
}
</script>

<script>
function acordeon(id) {
  var x = document.getElementById(id);
    var y = document.getElementById("disUs");
    if (y.className == "fa fa-chevron-circle-right") {
        y.className = y.className.replace("fa fa-chevron-circle-right","fa fa-chevron-circle-down");
    } else {
        y.className = y.className.replace("fa fa-chevron-circle-down", "fa fa-chevron-circle-right");
    }
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
    } else {
        x.className = x.className.replace(" w3-show", "");
    }
}
  handleFormSubmit(document.createElement("form"),"getUsuario");
  handleFormSubmit(document.createElement("form"),"readIngresos");
  handleFormSubmit(document.createElement("form"),"readEgresos");
  handleFormSubmit2(document.createElement("form"),"getTutorials");
  handleFormSubmit3(document.createElement("form"),"readAllGlosario");
  //window.onload = function() {
  //  crearChart();
  //};
  
</script>
</body>
</html>